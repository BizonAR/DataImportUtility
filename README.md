# DataImportUtility

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ TSV-—Ñ–∞–π–ª–æ–≤ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL 14.\
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π, –∞ —Ç–∞–∫–∂–µ –≤—ã–≤–æ–¥ –ø–æ–ª–Ω–æ–π –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ò–º–ø–æ—Ä—Ç –∏–∑ TSV:
  - `jobtitle.tsv` ‚Äî –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
  - `employees.tsv` ‚Äî —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
  - `departments.tsv` ‚Äî –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è
- –í—ã–≤–æ–¥ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∏–º–ø–æ—Ä—Ç –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–º–µ–Ω–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ –∏–ª–∏ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π
- –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –æ—à–∏–±–∫–∞–º –≤ —Ñ–∞–π–ª–∞—Ö

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [.NET 6 SDK](https://dotnet.microsoft.com/en-us/download/dotnet/6.0)
- PostgreSQL 14+
- –°–æ–∑–¥–∞–Ω–Ω–∞—è –ë–î –∏ —Ç–∞–±–ª–∏—Ü—ã (`create_schema.sql`)

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `appsettings.example.json` –≤ `appsettings.json`
2. –ó–∞–º–µ–Ω–∏—Ç–µ `YOUR_PASSWORD` –Ω–∞ –≤–∞—à –ø–∞—Ä–æ–ª—å –æ—Ç PostgreSQL:

```bash
cp appsettings.example.json appsettings.json
```

–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ `appsettings.json`:

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Host=localhost;Port=5432;Database=dataimportdb;Username=postgres;Password=YOUR_PASSWORD"
  },
  "Import": {
    "BatchSize": 1000
  }
}
```

## –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í—ã–ø–æ–ª–Ω–∏ —Å–∫—Ä–∏–ø—Ç:

```bash
psql -U postgres -f create_schema.sql
```

> –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ UTF-8 **–±–µ–∑ BOM**.

---

## üöÄ –ó–∞–ø—É—Å–∫

```bash
dotnet run -- <–∫–æ–º–∞–Ω–¥–∞> [–∞—Ä–≥—É–º–µ–Ω—Ç]
```

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

```bash
dotnet run -- import-departments data/departments.tsv --skip-managers
dotnet run -- import-jobtitles data/jobtitle.tsv
dotnet run -- import-employees data/employees.tsv
dotnet run -- import-departments data/departments.tsv
```

### –í—ã–≤–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
dotnet run -- print             # –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
dotnet run -- print <ID>       # –¶–µ–ø–æ—á–∫–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π + —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è
```

---

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–º–ø–æ—Ä—Ç–∞

- **–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∏–º–ø–æ—Ä—Ç**:
  - –ù–µ –¥—É–±–ª–∏—Ä—É–µ—Ç –∑–∞–ø–∏—Å–∏
  - –û–±–Ω–æ–≤–ª—è–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω—ã, –¥–æ–ª–∂–Ω–æ—Å—Ç–∏, –ø–∞—Ä–æ–ª–∏, —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π
- **–û—à–∏–±–∫–∏ –≤ —Å—Ç—Ä–æ–∫–∞—Ö** ‚Äî –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç —Ä–∞–±–æ—Ç—É, –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ `stderr`
- **–î–æ–ª–∂–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è** –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å
- **–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å** –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è —Å—Ä–µ–¥–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- **–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±–µ–∑ –≤–∞–ª–∏–¥–Ω–æ–π –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ –∏–ª–∏ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è** —Å—á–∏—Ç–∞—é—Ç—Å—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∏ –Ω–µ –≤—ã–≤–æ–¥—è—Ç—Å—è
- **–í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π** ‚Äî –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è

